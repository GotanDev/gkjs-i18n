var __=function(b,a){return gkjs.i18n.getMessage(b,a)};if(gkjs==null){var gkjs={}}gkjs.i18n={_settings:{basePath:"lang/",defaultLanguage:"fr"},_data:{},getLang:function(){if(window.localStorage==null||window.localStorage.lang==null){if(navigator.language==null){return this._settings.defaultLanguage}else{return navigator.language.indexOf("-")==-1?navigator.language:navigator.language.substr(0,navigator.language.indexOf("-"))}}else{return window.localStorage.lang}},getMessage:function(a,b,c){if(c==null){c=this.getLang()}if(this._data[c]==null){this.loadLanguage(c);return}a=a.trim();if(this._data[c][a]!=null){return this.parseVars(this._data[c][a],b)}logger.warn("[gkjs.i18n] Message "+a+" not found in "+c+" lang");if(c!=this._settings.defaultLanguage){return this.getMessage(a.trim(),b,this._settings.defaultLanguage)}else{return a}},parseVars:function(c,b){if(isArray(b)){for(var a=1;a<=b.length;a++){var d=new RegExp("%%"+a,"g");c=c.replace(d,b[a-1])}}return c},reset:function(){this._data={};for(var a in sessionStorage){if(a.startsWith("LOCALE_")){delete sessionStorage[a]}}logger.debug("i18n data has to be reloaded")},loadLanguage:function(a,b){if(gkjs.i18n._data[a]!=null){return}if(sessionStorage["LOCALE_"+a]!=null){gkjs.i18n._data[a]=jQuery.parseJSON(sessionStorage["LOCALE_"+a])}if(gkjs.i18n._data[a]==null){jQuery.ajax({type:"GET",cache:true,async:false,dataType:"text",url:this._settings.basePath+"Messages."+a+".json",success:function(c){sessionStorage["LOCALE_"+a]=c;gkjs.i18n._data[a]=jQuery.parseJSON(c);if(typeof b=="function"){b()}},error:function(d){gkjs.i18n._data[a]={};if(a==gkjs.i18n._settings.defaultLanguage){var c="[gkjs.i18n] Unable to load default language "+gkjs.i18n._settings.defaultLanguage;logger.error(c);logger.info("Status:"+d.status+" / URL: "+this.url);throw c}else{logger.warn("[gkjs.i18n] Unable to load language "+a);if(gkjs.i18n._data[gkjs.i18n._settings.defaultLanguage]==null){gkjs.i18n.loadLanguage(gkjs.i18n._settings.defaultLanguage)}}}})}},changeLanguage:function(a){window.localStorage.lang=a;this.loadLanguage(a)},run:function(){if(this._data==null){return}if(this._data[this.getLang()]==null){this.loadLanguage(this.getLang(),gkjs.i18n.run)}else{jQuery("[i18n]").each(function(){var a=jQuery(this).text();if(a.trim()!=""){jQuery(this).text(__(a))}jQuery(this).removeAttr("i18n");var b=["placeholder","title","alt","data-original-title"];for(attId in b){var c=b[attId];if(jQuery(this).attr(c)!=null&&jQuery(this).attr(c).trim()!=""){jQuery(this).attr(c,__(jQuery(this).attr(c)))}}})}},init:function(){gkjs.i18n.run()}};jQuery(document).ready(function(){gkjs.i18n.init()});if(typeof angular!="undefined"){angular.module("gkjs",[]).filter("i18n",function(){return function(a){return __(a)}})};